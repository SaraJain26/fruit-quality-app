# Fruit Quality App ğŸ

AIâ€‘inspired fruit (apple) quality dashboard with a FastAPI backend and a modern HTML/CSS/JS frontend.  
Upload an apple image to get simulated metrics like freshness, spoilage risk, dryâ€‘matter content, pesticide level, nutrients, and virtual AS7265x sensor curves.

***

## Features

- Login page with simple email/password authentication (demo mode).
- Dashboard with sidebar navigation:
  - **Upload Fruit Image** â€“ dragâ€‘andâ€‘drop or capture from camera.
  - **Analyze Quality** â€“ cards for:
    - Freshness score (0â€“100)
    - Dry matter content (%)
    - Spoilage risk (Low / Medium / High)
    - Estimated weight (kg)
    - Pesticide level (e.g., Pure / Insecticide Low / Fungicide High)
    - Nutrient breakdown (water, sugar, fiber, vitamin C)
    - Spectral analysis line chart
    - Nutrient composition bar chart
    - Quality distribution donut chart
  - **Sensor Emulation** â€“ table and graph of 18â€‘channel AS7265xâ€‘style spectral response (410â€“940 nm).
  - **About Project** â€“ description of concept and use cases.
- FastAPI backend:
  - `/api/auth/login` â€“ demo login (accepts any email + password â‰¥ 6 chars).
  - `/api/analyze/apple` â€“ accepts an image, runs computerâ€‘vision based segmentation + heuristics to generate all outputs.

> Note: This is a **simulation/demo** system, not a medically or industrially validated quality detector.

***

## Tech Stack

- **Backend:** Python, FastAPI, Uvicorn, OpenCV, Pillow, NumPy  
- **Frontend:** HTML5, CSS3, vanilla JavaScript, Chart.js  
- **Auth:** Simple token stored in `localStorage` / `sessionStorage` (no real security, demo only).

***

## Project Structure

```text
fruit-quality-app/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ main.py          # FastAPI app with login + analyze endpoints
â””â”€â”€ frontend/
    â”œâ”€â”€ login.html       # Login page
    â”œâ”€â”€ dashboard.html   # Main dashboard UI
    â”œâ”€â”€ css/
    â”‚   â””â”€â”€ styles.css   # All styling (login + dashboard)
    â””â”€â”€ js/
        â”œâ”€â”€ login.js     # Login form logic, calls /api/auth/login
        â””â”€â”€ dashboard.js # Navigation, upload, camera, charts, calls /api/analyze/apple
```

***

## Setup & Installation

1. **Clone the repo**

```bash
git clone https://github.com/<your-username>/fruit-quality-app.git
cd fruit-quality-app
```

2. **Create virtual environment (optional but recommended)**

```bash
python -m venv .venv
# Windows
.venv\Scripts\activate
# Linux / macOS
source .venv/bin/activate
```

3. **Install backend dependencies**

```bash
cd backend
pip install fastapi uvicorn opencv-python-headless pillow numpy python-multipart
```

***

## Running the Backend

From the `backend` folder:

```bash
uvicorn main:app --reload --port 8000
```

The API will be available at:  
`http://127.0.0.1:8000`

Endpoints:

- `POST /api/auth/login`
- `POST /api/analyze/apple`

***

## Running the Frontend

From the `frontend` folder:

- Open **`login.html`** in your browser:
  - Either by doubleâ€‘clicking it in your file explorer, or
  - Using a liveâ€‘server extension in VS Code.

### Login

- Use any email (e.g. `demo@atria.edu`)  
- Use any password with at least 6 characters.  
- On success you are redirected to `dashboard.html`.

***

## Usage Flow

1. **Login** with email + password.  
2. On the dashboard, go to **Upload Fruit Image**:
   - Click â€œBrowse Filesâ€ or â€œCapture from Cameraâ€.
   - After selecting an apple image, click **Analyze Apple**.
3. The app sends the image to `/api/analyze/apple`, then:
   - Updates all metric cards.
   - Updates spectral / nutrient / quality charts.
   - Populates the Sensor Emulation table and graph.

***

## How the â€œModelâ€ Works (High Level)

- Uses Kâ€‘means clustering in Lab color space to split â€œfreshâ€ vs â€œspoiledâ€ surface regions.
- Converts the fresh/spoiled ratios into:
  - Freshness score
  - Spoilage risk label
- Derives:
  - Dry matter % from freshness (simple mapping)
  - Weight from approximate radius in the image
  - Nutrients from dry matter (%)
  - Pesticide class + sensor curves as randomized but realisticâ€‘looking values.

This is intended for **educational/demo purposes** to show an endâ€‘toâ€‘end UX, not for real food safety decisions.

***

## Future Improvements

- Replace heuristic â€œmodelâ€ with real ML models trained on hyperspectral apple datasets.  
- Use proper authentication (JWT) and databaseâ€‘backed user accounts.  
- Persist analysis history and exportable reports.  
- Containerize with Docker and deploy backend + static frontend together.
